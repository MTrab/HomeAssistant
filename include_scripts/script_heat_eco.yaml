heat_eco_on:
  sequence:
    - service: input_number.set_value
      data_template:
        entity_id: input_number.heat_save_diningroom
        value: '{{ states.climate.danfoss_z_thermostat_heating_1.attributes.temperature | float }}'
    - service: input_number.set_value
      data_template:
        entity_id: input_number.heat_save_bathroom
        value: '{{ states.climate.danfoss_z_thermostat_heating_1_2.attributes.temperature | float }}'
    - service: input_number.set_value
      data_template:
        entity_id: input_number.heat_save_kitchen
        value: '{{ states.climate.danfoss_z_thermostat_heating_1_3.attributes.temperature | float }}'
    - service: input_number.set_value
      data_template:
        entity_id: input_number.heat_save_bedroom
        value: '{{ states.climate.danfoss_z_thermostat_heating_1_4.attributes.temperature | float }}'
    - service: input_number.set_value
      data_template:
        entity_id: input_number.heat_save_repos
        value: '{{ states.climate.danfoss_z_thermostat_heating_1_5.attributes.temperature | float }}'
    - service: input_number.set_value
      data_template:
        entity_id: input_number.heat_save_michael
        value: '{{ states.climate.danfoss_z_thermostat_heating_1_6.attributes.temperature | float }}'
    - service: input_number.set_value
      data_template:
        entity_id: input_number.heat_save_christian
        value: '{{ states.climate.danfoss_z_thermostat_heating_1_7.attributes.temperature | float }}'
    - service: input_number.set_value
      data_template:
        entity_id: input_number.heat_save_livingroom
        value: '{{ states.climate.danfoss_z_thermostat_heating_1_11.attributes.temperature | float }}'
    - service: input_number.set_value
      data_template:
        entity_id: input_number.heat_save_hall
        value: '{{ states.climate.danfoss_z_thermostat_heating_1_9.attributes.temperature | float }}'
    - service: input_number.set_value
      data_template:
        entity_id: input_number.heat_save_trains
        value: '{{ states.climate.danfoss_z_thermostat_heating_1_10.attributes.temperature | float }}'

    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1
        temperature: >-
          {% if states.input_boolean.heat_diningroom.state == 'on' %}
            {% if (states.climate.danfoss_z_thermostat_heating_1.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) < (states.input_number.heat_control_min_temp.state | float) %}
              {{ states.input_number.heat_control_min_temp.state | float }}
            {% else %}
              {{ (states.climate.danfoss_z_thermostat_heating_1.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) | float }}
            {% endif %}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_2
        temperature: >-
          {% if states.input_boolean.heat_bathroom.state == 'on' %}
            {% if (states.climate.danfoss_z_thermostat_heating_1_2.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) < (states.input_number.heat_control_min_temp.state | float) %}
              {{ states.input_number.heat_control_min_temp.state | float }}
            {% else %}
              {{ (states.climate.danfoss_z_thermostat_heating_1_2.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) | float }}
            {% endif %}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_2.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_3
        temperature: >-
          {% if states.input_boolean.heat_kitchen.state == 'on' %}
            {% if (states.climate.danfoss_z_thermostat_heating_1_3.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) < (states.input_number.heat_control_min_temp.state | float) %}
              {{ states.input_number.heat_control_min_temp.state | float }}
            {% else %}
              {{ (states.climate.danfoss_z_thermostat_heating_1_3.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) | float }}
            {% endif %}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_3.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_4
        temperature: >-
          {% if states.input_boolean.heat_bedroom.state == 'on' %}
            {% if (states.climate.danfoss_z_thermostat_heating_1_4.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) < (states.input_number.heat_control_min_temp.state | float) %}
              {{ states.input_number.heat_control_min_temp.state | float }}
            {% else %}
              {{ (states.climate.danfoss_z_thermostat_heating_1_4.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) | float }}
            {% endif %}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_4.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_5
        temperature: >-
          {% if states.input_boolean.heat_repos.state == 'on' %}
            {% if (states.climate.danfoss_z_thermostat_heating_1_5.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) < (states.input_number.heat_control_min_temp.state | float) %}
              {{ states.input_number.heat_control_min_temp.state | float }}
            {% else %}
              {{ (states.climate.danfoss_z_thermostat_heating_1_5.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) | float }}
            {% endif %}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_5.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_6
        temperature: >-
          {% if states.input_boolean.heat_michael.state == 'on' %}
            {% if (states.climate.danfoss_z_thermostat_heating_1_6.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) < (states.input_number.heat_control_min_temp.state | float) %}
              {{ states.input_number.heat_control_min_temp.state | float }}
            {% else %}
              {{ (states.climate.danfoss_z_thermostat_heating_1_6.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) | float }}
            {% endif %}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_6.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_7
        temperature: >-
          {% if states.input_boolean.heat_christian.state == 'on' %}
            {% if (states.climate.danfoss_z_thermostat_heating_1_7.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) < (states.input_number.heat_control_min_temp.state | float) %}
              {{ states.input_number.heat_control_min_temp.state | float }}
            {% else %}
              {{ (states.climate.danfoss_z_thermostat_heating_1_7.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) | float }}
            {% endif %}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_7.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_11
        temperature: >-
          {% if states.input_boolean.heat_livingroom.state == 'on' %}
            {% if (states.climate.danfoss_z_thermostat_heating_1_11.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) < (states.input_number.heat_control_min_temp.state | float) %}
              {{ states.input_number.heat_control_min_temp.state | float }}
            {% else %}
              {{ (states.climate.danfoss_z_thermostat_heating_1_11.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) | float }}
            {% endif %}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_11.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_9
        temperature: >-
          {% if states.input_boolean.heat_hall.state == 'on' %}
            {% if (states.climate.danfoss_z_thermostat_heating_1_9.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) < (states.input_number.heat_control_min_temp.state | float) %}
              {{ states.input_number.heat_control_min_temp.state | float }}
            {% else %}
              {{ (states.climate.danfoss_z_thermostat_heating_1_9.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) | float }}
            {% endif %}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_9.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_10
        temperature: >-
          {% if states.input_boolean.heat_trains.state == 'on' %}
            {% if (states.climate.danfoss_z_thermostat_heating_1_10.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) < (states.input_number.heat_control_min_temp.state | float) %}
              {{ states.input_number.heat_control_min_temp.state | float }}
            {% else %}
              {{ (states.climate.danfoss_z_thermostat_heating_1_10.attributes.temperature | float - states.input_number.heat_control_lowerby.state | float) | float }}
            {% endif %}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_10.attributes.temperature | float }}
          {% endif %}
          
heat_eco_off:
  sequence:
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1
        temperature: >-
          {% if states.input_boolean.heat_diningroom.state == 'on' %}
            {{ states.input_number.heat_save_diningroom.state | float}}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1.attributes.temperature | float }}
          {% endif %}
         
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_2
        temperature: >-
          {% if states.input_boolean.heat_bathroom.state == 'on' %}
            {{ states.input_number.heat_save_bathroom.state | float}}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_2.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_3
        temperature: >-
          {% if states.input_boolean.heat_kitchen.state == 'on' %}
            {{ states.input_number.heat_save_kitchen.state | float}}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_3.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_4
        temperature: >-
          {% if states.input_boolean.heat_bedroom.state == 'on' %}
            {{ states.input_number.heat_save_bedroom.state | float}}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_4.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_5
        temperature: >-
          {% if states.input_boolean.heat_repos.state == 'on' %}
            {{ states.input_number.heat_save_repos.state | float}}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_5.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_6
        temperature: >-
          {% if states.input_boolean.heat_michael.state == 'on' %}
            {{ states.input_number.heat_save_michael.state | float}}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_6.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_7
        temperature: >-
          {% if states.input_boolean.heat_christian.state == 'on' %}
            {{ states.input_number.heat_save_christian.state | float}}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_7.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_11
        temperature: >-
          {% if states.input_boolean.heat_livingroom.state == 'on' %}
            {{ states.input_number.heat_save_livingroom.state | float}}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_11.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_9
        temperature: >-
          {% if states.input_boolean.heat_hall.state == 'on' %}
            {{ states.input_number.heat_save_hall.state | float}}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_9.attributes.temperature | float }}
          {% endif %}
    - service: climate.set_temperature
      data_template: 
        entity_id: climate.danfoss_z_thermostat_heating_1_10
        temperature: >-
          {% if states.input_boolean.heat_trains.state == 'on' %}
            {{ states.input_number.heat_save_trains.state | float}}
          {% else %}
            {{ states.climate.danfoss_z_thermostat_heating_1_10.attributes.temperature | float }}
          {% endif %}